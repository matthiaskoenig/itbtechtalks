# -----------------------------------------------------------
# Autogenerated ODE definition from SBML file with sbmlutils.
#
#    model: lorenz
# -----------------------------------------------------------

# -------------------
# ids
# -------------------
xids <- c("x", "y", "z")
pids <- c("r", "b", "sigma")
yids <- c()

# -------------------
# initial conditions
# -------------------
x0 = c(
  x = 1.0,      # [1]
  y = 1.0,      # [2]
  z = 1.0      # [3]
)

# -------------------
# parameters
# -------------------
p = c(
  r = 45.92,      # [1]
  b = 4.0,      # [2]
  sigma = 16.0      # [3]
)

# -------------------
# odes
# -------------------
f_dxdt <- function(t, x, p){
    # ODE system
    x_ = x
    x = x_[1]  # [1] x
    y = x_[2]  # [2] y
    z = x_[3]  # [3] z

    r = 45.92      # [1] r
    b = 4.0      # [2] b
    sigma = 16.0      # [3] sigma


    # ode
    list(c(
        dx = sigma * (y - x),
        dy = x * (r - z) - y,
        dz = x * y - b * z
    ))
}

f_y <- function(times, x, p){
    # Calculate y


    # --------------------------------------
    c()
}


f_z <- function(times, X, p){
    # calculate z
    shape <- dim(X)
    Nt <- shape[1]
    Nx <- shape[2] - 1
    Ny = length(yids)
    Nz = 1 + Nx + Ny
    Z = matrix(, nrow=Nt, ncol=Nz)
    Z[,1] = times
    for (kx in seq(Nx)){
        Z[,(1+kx)] = X[,1+kx]
    }
    if (Ny > 0){
        for (kt in seq(Nt)){
            y = f_y(t=times[kt], x=X[kt, 2:(Nx+1)], p=p)
            Z[kt, (2+Nx):Nz] = y
        }
    }
    colnames(Z) <- c ("time", xids, yids)
    Z
}