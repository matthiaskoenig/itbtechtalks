# -----------------------------------------------------------
# Autogenerated ODE definition from SBML file with sbmlutils.
#
#    model: lorenz
# -----------------------------------------------------------

# -------------------
# ids
# -------------------
xids <- c("x", "y", "z")
pids <- c("r", "b", "sigma")
yids <- c()

# -------------------
# initial conditions
# -------------------
x0 = c(
  x = 1.0,      # [1]
  y = 1.0,      # [2]
  z = 1.0      # [3]
)

# -------------------
# parameters
# -------------------
p = c(
  r = 45.92,      # [1]
  b = 4.0,      # [2]
  sigma = 16.0      # [3]
)

# -------------------
# odes
# -------------------
f_dxdt <- function(t, x, p){
    # ODE system

    # ode
    list(c(
        dx = sigma * (x[1] - x[0]),
        dy = x[0] * (r - x[2]) - x[1],
        dz = x[0] * x[1] - b * x[2]
    ))
}

f_y <- function(times, x, p){
    # Calculate y


    # --------------------------------------
    c()
}


f_z <- function(times, X, p){
    # calculate z
    shape <- dim(X)
    Nt <- shape[1]
    Nx <- shape[2] - 1
    Ny = length(yids)
    Nz = 1 + Nx + Ny
    Z = matrix(, nrow=Nt, ncol=Nz)
    Z[,1] = times
    for (kx in seq(Nx)){
        Z[,(1+kx)] = X[,1+kx]
    }
    for (kt in seq(Nt)){
        y = f_y(t=times[kt], x=X[kt, 2:(Nx+1)], p=p)
        Z[kt, (2+Nx):Nz] = y
    }
    colnames(Z) <- c ("time", xids, yids)
    Z
}